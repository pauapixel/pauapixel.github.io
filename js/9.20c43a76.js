(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"02ca":function(t,e,i){"use strict";var n=i("8905"),o=i.n(n);o.a},8905:function(t,e,i){},"8fdd":function(t,e,i){"use strict";i("06db"),i("551c");var n=i("bc3a"),o=i.n(n),r=i("5206"),a=i("bd5e"),c=i("ba11"),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"codProject,ASC";return new Promise((function(c,s){o.a.get("".concat(r["a"].baseurl,"/pauapixel/api/project/").concat(t||"","?page=").concat(e,"&size=").concat(i,"&sort=").concat(n)).then((function(t){c(t)})).catch((function(t){Object(a["a"])(t,"Não foi possível recuperar o projeto para esse usuário."),s(t)}))}))},l=function(t){return new Promise((function(e,i){o.a.get("".concat(r["a"].baseurl,"/pauapixel/api/project/findByCodProject/").concat(t)).then((function(t){e(t)})).catch((function(t){Object(a["a"])(t,"Não foi possível recuperar o projeto para esse usuário."),i(t)}))}))},p=function(t){return new Promise((function(e,i){o()({method:"post",url:"".concat(r["a"].baseurl,"/pauapixel/api/project/save"),data:t,headers:{"Content-Type":"application/json"}}).then((function(t){Object(c["a"])("Projeto salvo com sucesso."),e(t)})).catch((function(t){Object(a["a"])(t,"Não foi possível salvar o Projeto."),i(t)}))}))},d=function(t){return new Promise((function(e,i){o.a.get("".concat(r["a"].baseurl,"/pauapixel/api/project/remove/").concat(t)).then((function(t){Object(c["a"])("Projeto removido com sucesso."),e(t)})).catch((function(t){Object(a["a"])(t,"Não foi possível remover o projeto."),i(t)}))}))};e["a"]={findAll:s,getProjectBy:l,save:p,remove:d}},"965e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("div",{staticClass:"page row justify-center no-print"},[i("q-card",{staticClass:"card-layout page-card card-script",attrs:{inline:""}},[i("q-card-section",{staticClass:"full-height"},[t.loading.retrieving?i("section",{staticClass:"row justify-center items-center full-height"},[i("div",{staticClass:"column"},[i("q-spinner-facebook",{attrs:{color:"primary",size:"5em"}}),i("div",[t._v("carregando..")])],1)]):i("section",[i("q-breadcrumbs",{staticClass:"no-print row q-mb-md text-grey-7",attrs:{"active-color":"primary"},scopedSlots:t._u([{key:"separator",fn:function(){return[i("q-icon",{attrs:{name:"chevron_right",color:"primary"}})]},proxy:!0}],null,!1,2813167706)},[i("q-breadcrumbs-el",{attrs:{icon:"home",label:"Projetos",to:"/"}}),i("q-breadcrumbs-el",{attrs:{icon:"assignment",label:"Projeto",to:"/projects/project/"+t.$route.params.codProject}}),i("q-breadcrumbs-el",{attrs:{icon:"import_contacts",label:"Roteiro",to:"/projects/project/script/"+t.$route.params.codProject}}),i("q-breadcrumbs-el",{attrs:{icon:"visibility",label:"Visualização",to:"/projects/project/script/"+t.$route.params.codProject}})],1),i("div",{staticClass:"row justify-end q-mb-lg no-print"},[t.$q.platform.is.mobile?t._e():i("q-btn",{staticClass:"text-white q-mr-sm",attrs:{size:"md",color:"secondary",unelevated:""},on:{click:function(e){return t.print()}}},[i("q-icon",{staticClass:"q-mr-sm",attrs:{color:"white",name:"local_printshop"}})],1),i("q-btn",{staticClass:"text-white",attrs:{size:"md",color:"secondary",unelevated:""},on:{click:function(e){return t.savePDF()}}},[t.loading.generating?t._e():i("q-icon",{staticClass:"q-mr-sm",attrs:{color:"white",name:"picture_as_pdf"}}),t.loading.generating?i("q-spinner-facebook",{attrs:{color:"white",size:"1em"}}):t._e()],1)],1),t.project.script?i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","flex-direction":"column",margin:"15px"},attrs:{id:"script-view"}},[i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"center","text-align":"center","font-family":"'Courier New'","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","margin-bottom":"16px"}},[t._v("\n              "+t._s(t.project.script.name)+"\n            ")]),i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"center","text-align":"center","font-family":"'Courier New'","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","margin-bottom":"16px"}},[t._v("\n              "+t._s(t.project.script.author)+"\n            ")]),t.project.script.sequencies&&t.project.script.sequencies.length?i("div",t._l(t.project.script.sequencies,(function(e,n){return i("div",{key:n},[i("div",{staticStyle:{"font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","text-align":"justify","font-family":"'Courier New'","margin-bottom":"16px"}},[t._v("\n                  "+t._s(e.scene)+"\n                ")]),i("div",{staticStyle:{"text-align":"justify","font-family":"'Courier New'","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","margin-bottom":"25px"}},[t._v("\n                  "+t._s(e.description)+"\n                ")]),e.childrens.length?i("div",[i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","flex-direction":"column"}},t._l(e.childrens,(function(e,n){return i("div",{key:n},[e.hasOwnProperty("codDialog")?i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","flex-direction":"column"}},[i("div",{staticStyle:{display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"center","text-align":"center"}},[i("div",{staticStyle:{"text-align":"center","text-transform":"uppercase","font-weight":"bold","font-family":"Courier New","font-size":"12px","letter-spacing":"0.16667em","margin-bottom":"10px"}},[t._v("\n                            "+t._s(e.character.name)+"\n                          ")])]),i("div",{staticStyle:{display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"center","text-align":"center"}},[i("div",{staticStyle:{width:"50%","text-align":"justify","font-family":"Courier New","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","margin-bottom":"25px"}},[t._v("\n                            "+t._s(e.dialog)+"\n                          ")])]),i("div",{staticStyle:{"font-family":"Courier New","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","text-align":"justify","margin-bottom":"10px"}},[t._v("\n                          "+t._s(e.description)+"\n                        ")])]):i("div",{staticStyle:{"text-align":"right","text-transform":"uppercase","font-weight":"bold","font-family":"Courier New","font-size":"12px","letter-spacing":"0.16667em",margin:"16px 0px"}},[t._v("\n                        "+t._s(e.transitionType.label)+"\n                      ")])])})),0)]):t._e()])})),0):t._e()]):t._e()],1)])],1)],1),i("div",{attrs:{id:"script-view-paged"}})])},o=[],r=i("6461"),a=i.n(r),c=(i("5df3"),i("06db"),i("cadf"),i("ac6a"),i("551c"),i("a85c")),s=i("8fdd"),l=i("676e"),p=i("e774"),d={name:"ScriptViewPage",data:function(){return{loading:{retrieving:!1,generating:!1},project:{},codProject:null}},mounted:function(){this.init()},methods:{init:function(){this.codProject=this.$route.params.codProject,this.codProject?this.getProject().then((function(){for(var t=new l["Previewer"],e=document.getElementById("script-view").cloneNode(!0),i=t.removeStyles(e),n=e.querySelectorAll("#script-view > *"),o=document.createDocumentFragment(),r=0;r<n.length;r++)o.appendChild(n[r]);t.preview(o,i,document.getElementById("script-view-paged")).then((function(t){t.pages.forEach((function(t,e){var i=t.element.querySelectorAll("div.pagedjs_margin-top-right-corner");i[0].style.visibility="visible";var n=t.element.querySelectorAll("div.pagedjs_margin-top-right-corner div.pagedjs_margin-content");n[0].innerHTML="Página ".concat(e+1)})),document.body.clientWidth<1024&&(document.getElementById("script-view-paged").style.display="none")}))})):this.$router.push({path:""})},print:function(){window.print()},savePDF:function(){var t=this;if(!this.loading.generating){this.loading.generating=!0;var e=(new Date).toLocaleString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit"});document.body.clientWidth<1024&&(document.getElementById("script-view-paged").style.display="block");for(var i=document.getElementsByClassName("pagedjs_sheet"),n=new jsPDF("portrait","pt","a4"),o=[],r=0;r<i.length;r++){var a=i[r],c=Object(p["a"])(a,{quality:1,width:816,height:1056});o.push(c)}document.body.clientWidth<1024&&(document.getElementById("script-view-paged").style.display="none"),Promise.all(o).then((function(i){i.forEach((function(t,e){e>0&&n.addPage(),n.addImage(t,"PNG",0,0)})),n.save("".concat(e,".pdf")),t.loading.generating=!1}))}},getProject:function(){var t=this;return new Promise((function(e,i){t.codProject?(t.loading.retrieving=!0,s["a"].getProjectBy(t.codProject).then((function(n){t.loading.retrieving=!1,n.data instanceof Object?(t.project=n.data,t.project.script.sequencies.forEach((function(t){return t.childrens=[].concat(a()(t.dialogs),a()(t.transitions)).sort((function(t,e){return t.position-e.position}))})),e()):(c["a"].error("O usuário não tem acesso a este conteúdo."),t.$router.push({name:"projects"}),i())})).catch((function(){t.loading.retrieving=!1,i()}))):i()}))}}},u=d,f=(i("02ca"),i("2877")),g=Object(f["a"])(u,n,o,!1,null,null,null);e["default"]=g.exports},ba11:function(t,e,i){"use strict";var n=i("a85c"),o=function(t){n["a"].success(t)};e["a"]=o},bd5e:function(t,e,i){"use strict";var n=i("a85c"),o=function(t,e){t&&t.ERR_INTERNET_DISCONNECTED||t&&t.SESSION_EXPIRED||n["a"].error(e)};e["a"]=o}}]);