(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"023e":function(t,e,o){"use strict";o("551c"),o("06db");var n=o("bc3a"),a=o.n(n),r=o("5206"),s=o("bd5e"),c=o("ba11"),i=function(t){return new Promise((function(e,o){a.a.get("".concat(r["a"].api,"user/existsEmail/").concat(t)).then((function(t){e(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível validar esse e-mail."),o(t)}))}))},l=function(t){return new Promise((function(e,o){a()({method:"post",url:"".concat(r["a"].api,"user/register"),data:t,headers:{"Content-Type":"application/json"}}).then((function(t){Object(c["a"])("Usuário cadastrado com sucesso."),e(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível cadastrar o usuário."),o(t)}))}))},u=function(){return new Promise((function(t,e){a.a.get("".concat(r["a"].api,"user/associate")).then((function(e){t(e)})).catch((function(t){Object(s["a"])(t,"Não foi possível obter os usuários."),e(t)}))}))};e["a"]={existsEmail:i,register:l,associates:u}},"8fdd":function(t,e,o){"use strict";o("551c"),o("06db");var n=o("bc3a"),a=o.n(n),r=o("5206"),s=o("bd5e"),c=o("ba11"),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"codProject,ASC";return new Promise((function(c,i){a.a.get("".concat(r["a"].api,"project/").concat(t||"","?page=").concat(e,"&size=").concat(o,"&sort=").concat(n)).then((function(t){c(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível recuperar o projeto para esse usuário."),i(t)}))}))},l=function(t){return new Promise((function(e,o){a.a.get("".concat(r["a"].api,"project/findByCodProject/").concat(t)).then((function(t){e(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível recuperar o projeto para esse usuário."),o(t)}))}))},u=function(t){return new Promise((function(e,o){a()({method:"post",url:"".concat(r["a"].api,"project/save"),data:t,headers:{"Content-Type":"application/json"}}).then((function(t){Object(c["a"])("Projeto salvo com sucesso."),e(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível salvar o Projeto."),o(t)}))}))},d=function(t){return new Promise((function(e,o){a.a.get("".concat(r["a"].api,"project/remove/").concat(t)).then((function(t){Object(c["a"])("Projeto removido com sucesso."),e(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível remover o projeto."),o(t)}))}))};e["a"]={findAll:i,getProjectBy:l,save:u,remove:d}},9506:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"page row justify-center"},[o("q-card",{staticClass:"card-layout page-card",attrs:{inline:""}},[o("q-card-section",{staticClass:"full-height"},[o("q-breadcrumbs",{staticClass:"row q-mb-md text-grey-7",attrs:{"active-color":"primary"},scopedSlots:t._u([{key:"separator",fn:function(){return[o("q-icon",{attrs:{name:"chevron_right",color:"primary"}})]},proxy:!0}])},[o("q-breadcrumbs-el",{attrs:{icon:"home",label:"Projetos",to:"/"}})],1),o("q-table",{attrs:{color:"secondary",grid:"","hide-header":"","row-key":"name","rows-per-page-label":"Por página","no-results-label":"Nenhum projeto encontrado.","no-data-label":"Nenhum projeto cadastrado.","loading-label":"Buscando...","rows-per-page-options":[6,12,24],data:t.projects,columns:t.columns,filter:t.filter,pagination:t.pagination,loading:t.loading},on:{"update:pagination":function(e){t.pagination=e},request:t.findAll},scopedSlots:t._u([{key:"top",fn:function(){return[o("div",{staticClass:"column full-width"},[o("div",{staticClass:"row justify-between items-center full-width q-mb-lg"},[o("div",{staticClass:"row col-grow"},[o("q-input",{staticClass:"col-xs-10 col-sm-8 col-md-8 col-lg-8",attrs:{clearable:"",filled:"",color:"secondary",label:"Pesquisar"},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"search",color:"secondary"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),o("div",[o("q-btn",{attrs:{round:"",color:"secondary",icon:"add"},on:{click:function(e){return t.goToProject()}}})],1)]),o("div",{staticClass:"separator"})])]},proxy:!0},{key:"item",fn:function(e){return[o("section",{staticClass:"q-pa-xs q-mb-xs col-xs-12 col-sm-6 col-md-6 col-lg-6 grid-style-transition"},[o("q-card",{staticClass:"bg-primary full-height",attrs:{dark:""}},[o("q-card-section",[o("q-item-label",{staticClass:"text-white text-h6"},[t._v("\n                  "+t._s(e.row.name)+"\n                ")]),e.row.codUser===t.getUser.codUser?o("q-item-label",{staticClass:"text-white",attrs:{caption:""}},[t._v("\n                  Proprietário\n                ")]):o("q-item-label",{staticClass:"text-white",attrs:{caption:""}},[t._v("\n                  Associado\n                ")])],1),o("q-separator",{attrs:{dark:""}}),o("q-card-section",[0===e.row.associates.length?o("q-badge",{staticClass:"row full-width",attrs:{outline:"",color:"white"}},[o("q-icon",{staticClass:"q-mr-sm",attrs:{name:"error_outline",color:"white",size:"24px"}}),t._v("\n                  Nenhum associado ao projeto.\n                ")],1):o("q-badge",{staticClass:"row full-width cursor-pointer",attrs:{outline:"",color:"white"},on:{click:function(o){return t.openModal(e.row)}}},[o("q-icon",{staticClass:"q-mr-sm",attrs:{name:"people_outline",color:"white",size:"24px"}}),t._v("\n                  Ver usuários\n                ")],1)],1),o("q-separator",{attrs:{dark:""}}),o("q-card-actions",{staticClass:"row justify-end"},[o("q-btn",{attrs:{outline:"",round:"",size:"sm",color:"white",icon:"edit"},on:{click:function(o){return t.goToProject(e.row.codProject)}}}),e.row.codUser===t.getUser.codUser?o("q-btn",{staticClass:"q-ml-sm",attrs:{outline:"",round:"",size:"sm",color:"white",icon:"delete"},on:{click:function(o){return t.confirmRemove(e.row.codProject)}}}):t._e()],1)],1)],1)]}},{key:"pagination",fn:function(e){return[o("q-btn",{staticClass:"q-mr-sm",attrs:{disable:e.isFirstPage,icon:"keyboard_arrow_left",color:"secondary",size:"sm",round:"",dense:""},on:{click:e.prevPage}}),o("div",{staticClass:"q-mr-sm text-caption"},[e.pagesNumber!==1/0?o("span",[t._v("\n              "+t._s(e.pagination.page)+" de "+t._s(e.pagesNumber)+"\n            ")]):t._e(),e.pagesNumber===1/0?o("span",[t._v("\n              Todos resultados\n            ")]):t._e()]),o("q-btn",{attrs:{disable:e.isLastPage,icon:"keyboard_arrow_right",color:"secondary",size:"sm",round:"",dense:""},on:{click:e.nextPage}})]}}])}),o("q-dialog",{on:{hide:t.closeModal},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[o("q-card",{staticClass:"card-layout"},[o("q-card-section",[o("div",{staticClass:"text-h6 text-secondary"},[t._v(t._s(t.project?t.project.name:""))])]),t.project?o("q-card-section",{staticClass:"row q-pt-none"},t._l(t.project.associates,(function(e,n){return o("q-chip",{key:n,attrs:{size:"xl"}},[o("q-avatar",{attrs:{color:"secondary","text-color":"white"}},[t._v("\n                "+t._s(e.name.charAt(0).toUpperCase())+"\n              ")]),o("div",{staticClass:"col-12 text-caption"},[o("div",[t._v(t._s(e.owner?"(Proprietário) ":""))]),o("div",[t._v(t._s(e.name)+" - "+t._s(e.role))])])],1)})),1):t._e(),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"secondary"}})],1)],1)],1)],1)],1)],1)},a=[],r=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("456d"),o("c47a")),s=o.n(r),c=(o("551c"),o("06db"),o("7514"),o("7f7f"),o("2f62")),i={data:function(){return{filter:"",loading:!1,rowsPerPage:[6,12,24],pagination:{page:1,rowsNumber:6,rowsPerPage:6}}},methods:{parsePaginationParams:function(t){var e;t.sortBy&&(e="".concat(t.sortBy,",").concat(t.descending?"DESC":"ASC"));var o=t.page-1,n=t.rowsPerPage;return{page:o,size:n,sort:e}}}},l=i,u=o("023e"),d=o("8fdd");function f(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?f(Object(o),!0).forEach((function(e){s()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var m={name:"ProjectsPage",mixins:[l],data:function(){return{loading:!1,columns:[{name:"codProject",required:!0,label:"Cod.",align:"left",field:function(t){return t.name},format:function(t){return"".concat(t)},sortable:!1},{name:"Nome",required:!0,label:"name",align:"left",field:function(t){return t.name},format:function(t){return"".concat(t)},sortable:!1},{name:"Associados",required:!0,label:"associate",align:"left",field:function(t){return t.name},format:function(t){return"".concat(t)},sortable:!1}],projects:[],users:[],project:[],modal:!1}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.getAssociate().then((function(){t.findAll({pagination:t.pagination,filter:t.filter})}))},goToProject:function(t){this.$router.push({path:"projects/project/".concat(t||"")})},openModal:function(t){this.project=t,this.modal=!0},closeModal:function(){this.project=null,this.modal=!1},confirmRemove:function(t){var e=this;this.$q.dialog({title:"Atenção!",message:"Deseja realmente remover esse projeto?",noBackdropDismiss:!0,noEscDismiss:!0,color:"tertiary",ok:"SIM",cancel:"NÃO"}).onOk((function(){e.loading=!1,d["a"].remove(t).then((function(t){e.loading=!1,e.findAll({pagination:e.pagination,filter:e.filter})})).catch((function(){e.loading=!1}))})).onCancel((function(){}))},findAll:function(t){var e=this,o=t.pagination,n=t.filter;this.loading=!0;var a=this.parsePaginationParams(o);d["a"].findAll(n,a.page,a.size,a.sort).then((function(t){e.loading=!1,e.pagination=o,e.pagination.rowsNumber=t.data.totalElements,e.projects=t.data.content,e.formatAssociates()})).catch((function(){e.loading=!1}))},formatAssociates:function(){var t=this;this.projects.forEach((function(e){var o=[];e.associates.forEach((function(n){var a=t.users.find((function(t){var e=t.roles.find((function(t){return t.codRole===n.codRole}));return t.codUser===n.codUser&&e}));a&&o.push({name:a.name,role:a.roles.find((function(t){return t.codRole===n.codRole})).label,owner:e.codUser===a.codUser})})),e.associates=o}))},getAssociate:function(){var t=this;return this.loading=!0,new Promise((function(e,o){u["a"].associates().then((function(o){t.users=o.data,e()})).catch((function(e){t.loading=!1,o(e)}))}))}},computed:p({},Object(c["b"])("user",["getUser","getRoles"]))},g=m,h=o("2877"),b=Object(h["a"])(g,n,a,!1,null,null,null);e["default"]=b.exports},ba11:function(t,e,o){"use strict";var n=o("a85c"),a=function(t){n["a"].success(t)};e["a"]=a},bd5e:function(t,e,o){"use strict";var n=o("a85c"),a=function(t,e){t&&t.ERR_INTERNET_DISCONNECTED||t&&t.SESSION_EXPIRED||n["a"].error(e)};e["a"]=a}}]);