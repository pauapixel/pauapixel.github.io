(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"02ca":function(t,e,i){"use strict";var o=i("8905"),n=i.n(o);n.a},8905:function(t,e,i){},"8fdd":function(t,e,i){"use strict";i("06db"),i("551c");var o=i("bc3a"),n=i.n(o),r=i("5206"),a=i("bd5e"),c=i("ba11"),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"codProject,ASC";return new Promise((function(c,s){n.a.get("".concat(r["a"].baseurl,"/pauapixel/api/project/").concat(t||"","?page=").concat(e,"&size=").concat(i,"&sort=").concat(o)).then((function(t){c(t)})).catch((function(t){Object(a["a"])(t,"Não foi possível recuperar o projeto para esse usuário."),s(t)}))}))},l=function(t){return new Promise((function(e,i){n.a.get("".concat(r["a"].baseurl,"/pauapixel/api/project/findByCodProject/").concat(t)).then((function(t){e(t)})).catch((function(t){Object(a["a"])(t,"Não foi possível recuperar o projeto para esse usuário."),i(t)}))}))},d=function(t){return new Promise((function(e,i){n()({method:"post",url:"".concat(r["a"].baseurl,"/pauapixel/api/project/save"),data:t,headers:{"Content-Type":"application/json"}}).then((function(t){Object(c["a"])("Projeto salvo com sucesso."),e(t)})).catch((function(t){Object(a["a"])(t,"Não foi possível salvar o Projeto."),i(t)}))}))},p=function(t){return new Promise((function(e,i){n.a.get("".concat(r["a"].baseurl,"/pauapixel/api/project/remove/").concat(t)).then((function(t){Object(c["a"])("Projeto removido com sucesso."),e(t)})).catch((function(t){Object(a["a"])(t,"Não foi possível remover o projeto."),i(t)}))}))};e["a"]={findAll:s,getProjectBy:l,save:d,remove:p}},"965e":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("div",{staticClass:"page row justify-center no-print"},[i("q-card",{staticClass:"card-layout page-card card-script",attrs:{inline:""}},[i("q-card-section",{staticClass:"full-height"},[t.loading.retrieving?i("section",{staticClass:"row justify-center items-center full-height"},[i("div",{staticClass:"column"},[i("q-spinner-facebook",{attrs:{color:"primary",size:"5em"}}),i("div",[t._v("carregando..")])],1)]):i("section",[i("q-breadcrumbs",{staticClass:"no-print row q-mb-md text-grey-7",attrs:{"active-color":"primary"},scopedSlots:t._u([{key:"separator",fn:function(){return[i("q-icon",{attrs:{name:"chevron_right",color:"primary"}})]},proxy:!0}],null,!1,2813167706)},[i("q-breadcrumbs-el",{attrs:{icon:"home",label:"Projetos",to:"/"}}),i("q-breadcrumbs-el",{attrs:{icon:"assignment",label:"Projeto",to:"/projects/project/"+t.$route.params.codProject}}),i("q-breadcrumbs-el",{attrs:{icon:"import_contacts",label:"Roteiro",to:"/projects/project/script/"+t.$route.params.codProject+"/"+t.$route.params.codScript}}),i("q-breadcrumbs-el",{attrs:{icon:"visibility",label:"Visualização",to:"/projects/project/script-view/"+t.$route.params.codProject+"/"+t.$route.params.codScript}})],1),i("div",{staticClass:"row justify-end q-mb-lg no-print"},[t.$q.platform.is.mobile?t._e():i("q-btn",{staticClass:"text-white q-mr-sm",attrs:{size:"md",color:"secondary",unelevated:""},on:{click:function(e){return t.print()}}},[i("q-icon",{staticClass:"q-mr-sm",attrs:{color:"white",name:"local_printshop"}})],1),i("q-btn",{staticClass:"text-white",attrs:{size:"md",color:"secondary",unelevated:""},on:{click:function(e){return t.savePDF()}}},[t.loading.generating?t._e():i("q-icon",{staticClass:"q-mr-sm",attrs:{color:"white",name:"picture_as_pdf"}}),t.loading.generating?i("q-spinner-facebook",{attrs:{color:"white",size:"1em"}}):t._e()],1)],1),t.project.script?i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","flex-direction":"column",margin:"15px"},attrs:{id:"script-view"}},[i("div",{staticStyle:{"min-height":"860px","text-align":"center"}},[i("div",{staticStyle:{padding:"50% 0","font-family":"'Courier New'","font-size":"16px","font-weight":"500","letter-spacing":"0.16667em"}},[i("p",[t._v(t._s(t.project.script.name))]),i("p",[t._v(t._s(t.project.script.author.name))])]),i("div",{staticStyle:{"font-family":"'Courier New'","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","padding-top":"75px"}},[i("p",[t._v(t._s(t.project.script.copyright)+" ")]),i("p",[t._v(t._s(t.formatFooter()))])])]),t.project.script.sequencies&&t.project.script.sequencies.length?i("div",[i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"center","text-align":"center","font-family":"'Courier New'","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","margin-bottom":"16px"}},[t._v("\n                "+t._s(t.project.script.description)+"\n              ")]),t._l(t.project.script.sequencies,(function(e,o){return i("div",{key:o},[i("div",{staticStyle:{"font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","text-align":"justify","font-family":"'Courier New'","margin-bottom":"16px"}},[t._v("\n                  "+t._s(e.scene)+"\n                ")]),i("div",{staticStyle:{"text-align":"justify","font-family":"'Courier New'","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","margin-bottom":"25px"}},[t._v("\n                  "+t._s(e.description)+"\n                ")]),e.childrens.length?i("div",[i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","flex-direction":"column"}},t._l(e.childrens,(function(e,o){return i("div",{key:o},[e.hasOwnProperty("codDialog")?i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","flex-direction":"column"}},[i("div",{staticStyle:{display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"center","text-align":"center"}},[i("div",{staticStyle:{"text-align":"center","text-transform":"uppercase","font-weight":"bold","font-family":"Courier New","font-size":"12px","letter-spacing":"0.16667em","margin-bottom":"10px"}},[t._v("\n                            "+t._s(e.character.name)+"\n                          ")])]),i("div",{staticStyle:{display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"center","text-align":"center"}},[i("div",{staticStyle:{width:"50%","text-align":"justify","font-family":"Courier New","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","margin-bottom":"25px"}},[t._v("\n                            "+t._s(e.dialog)+"\n                          ")])]),i("div",{staticStyle:{"font-family":"Courier New","font-size":"12px","font-weight":"500","letter-spacing":"0.16667em","text-align":"justify","margin-bottom":"10px"}},[t._v("\n                          "+t._s(e.description)+"\n                        ")])]):i("div",{staticStyle:{"text-align":"right","text-transform":"uppercase","font-weight":"bold","font-family":"Courier New","font-size":"12px","letter-spacing":"0.16667em",margin:"16px 0px"}},[t._v("\n                        "+t._s(e.transitionType.label)+"\n                      ")])])})),0)]):t._e()])}))],2):t._e()]):t._e()],1)])],1)],1),i("div",{attrs:{id:"script-view-paged"}})])},n=[],r=i("6461"),a=i.n(r),c=(i("7f7f"),i("d25f"),i("5df3"),i("06db"),i("cadf"),i("ac6a"),i("551c"),i("a85c")),s=i("8fdd"),l=i("676e"),d=i("e774"),p={name:"ScriptViewPage",data:function(){return{loading:{retrieving:!1,generating:!1},project:{},codProject:null}},mounted:function(){this.init()},methods:{init:function(){this.codProject=this.$route.params.codProject,this.codProject?this.getProject().then((function(){for(var t=new l["Previewer"],e=document.getElementById("script-view").cloneNode(!0),i=t.removeStyles(e),o=e.querySelectorAll("#script-view > *"),n=document.createDocumentFragment(),r=0;r<o.length;r++)n.appendChild(o[r]);t.preview(n,i,document.getElementById("script-view-paged")).then((function(t){t.pages.forEach((function(t,e){var i=t.element.querySelectorAll("div.pagedjs_margin-top-right-corner");i[0].style.visibility="visible";var o=t.element.querySelectorAll("div.pagedjs_margin-top-right-corner div.pagedjs_margin-content");o[0].innerHTML=e>0?"Página ".concat(e):""})),document.body.clientWidth<1024&&(document.getElementById("script-view-paged").style.display="none")}))})):this.$router.push({path:""})},formatFooter:function(){var t,e,i,o,n,r,a,c,s,l,d,p,u,f,v,m,g,h,y,j,w,b,x,_,P,S,q,C,N,E=[null===this||void 0===this||null===(t=this.project)||void 0===t||null===(e=t.script)||void 0===e||null===(i=e.author)||void 0===i?void 0:i.login,null===this||void 0===this||null===(o=this.project)||void 0===o||null===(n=o.script)||void 0===n||null===(r=n.author)||void 0===r||null===(a=r.profile)||void 0===a?void 0:a.street,null===this||void 0===this||null===(c=this.project)||void 0===c||null===(s=c.script)||void 0===s||null===(l=s.author)||void 0===l||null===(d=l.profile)||void 0===d?void 0:d.number,null===this||void 0===this||null===(p=this.project)||void 0===p||null===(u=p.script)||void 0===u||null===(f=u.author)||void 0===f||null===(v=f.profile)||void 0===v?void 0:v.neighborhood,null===this||void 0===this||null===(m=this.project)||void 0===m||null===(g=m.script)||void 0===g||null===(h=g.author)||void 0===h||null===(y=h.profile)||void 0===y||null===(j=y.city)||void 0===j?void 0:j.name,null===this||void 0===this||null===(w=this.project)||void 0===w||null===(b=w.script)||void 0===b||null===(x=b.author)||void 0===x||null===(_=x.profile)||void 0===_||null===(P=_.state)||void 0===P?void 0:P.uf,null===this||void 0===this||null===(S=this.project)||void 0===S||null===(q=S.script)||void 0===q||null===(C=q.author)||void 0===C||null===(N=C.profile)||void 0===N?void 0:N.phone];return E.filter((function(t){return t})).join(",")},print:function(){window.print()},savePDF:function(){var t=this;if(!this.loading.generating){this.loading.generating=!0;var e=(new Date).toLocaleString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit"});document.body.clientWidth<1024&&(document.getElementById("script-view-paged").style.display="block");for(var i=document.getElementsByClassName("pagedjs_sheet"),o=new jsPDF("portrait","pt","a4"),n=[],r=0;r<i.length;r++){var a=i[r],c=Object(d["a"])(a,{quality:1,width:816,height:1056});n.push(c)}document.body.clientWidth<1024&&(document.getElementById("script-view-paged").style.display="none"),Promise.all(n).then((function(i){i.forEach((function(t,e){e>0&&o.addPage(),o.addImage(t,"PNG",0,0)})),o.save("".concat(e,".pdf")),t.loading.generating=!1}))}},getProject:function(){var t=this;return new Promise((function(e,i){t.codProject?(t.loading.retrieving=!0,s["a"].getProjectBy(t.codProject).then((function(o){t.loading.retrieving=!1,o.data instanceof Object?(t.project=o.data,t.project.script.sequencies.forEach((function(t){return t.childrens=[].concat(a()(t.dialogs),a()(t.transitions)).sort((function(t,e){return t.position-e.position}))})),e()):(c["a"].error("O usuário não tem acesso a este conteúdo."),t.$router.push({name:"projects"}),i())})).catch((function(){t.loading.retrieving=!1,i()}))):i()}))}}},u=p,f=(i("02ca"),i("2877")),v=Object(f["a"])(u,o,n,!1,null,null,null);e["default"]=v.exports},ba11:function(t,e,i){"use strict";var o=i("a85c"),n=function(t){o["a"].success(t)};e["a"]=n},bd5e:function(t,e,i){"use strict";var o=i("a85c"),n=function(t,e){t&&t.ERR_INTERNET_DISCONNECTED||t&&t.SESSION_EXPIRED||o["a"].error(e)};e["a"]=n}}]);